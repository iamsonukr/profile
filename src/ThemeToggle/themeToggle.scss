@import url('https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0');

@keyframes starTwinkle {
  0%, 100% { opacity: 0.7; transform: scale(1); }
  50% { opacity: 0.3; transform: scale(0.8); }
}

@keyframes cloudMove {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100vw); }
}

.theme-toggle {
  position: relative;
  width: 60px;
  height: 30px;
  border-radius: 15px;
  border: none;
  cursor: pointer;
  overflow: hidden;
  background: linear-gradient(135deg, #87CEEB 0%, #1E90FF 100%);
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);

  // Sun element - main circle
  &::before {
    content: '';
    position: absolute;
    top: 4px;
    left: 4px;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    background: radial-gradient(circle at center,
      #FFF176 0%,
      #FFD700 50%,
      #FFA000 100%
    );
    transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateX(0);
    z-index: 2;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
  }

  // Clouds
  .cloud {
    position: absolute;
    background: rgba(255, 255, 255, 0.9);
    border-radius: 10px;
    transition: all 0.5s ease;
    z-index: 3;

    &::before,
    &::after {
      content: '';
      position: absolute;
      background: inherit;
      border-radius: 50%;
    }
  }

  .cloud-1 {
    width: 35px;
    height: 12px;
    bottom: 8px;
    left: -35px;
    animation: cloudMove 15s linear infinite;
    animation-delay: -5s;

    &::before {
      width: 16px;
      height: 16px;
      top: -8px;
      left: 8px;
    }

    &::after {
      width: 12px;
      height: 12px;
      top: -6px;
      left: 18px;
    }
  }

  .cloud-2 {
    width: 28px;
    height: 10px;
    bottom: 6px;
    right: -28px;
    animation: cloudMove 12s linear infinite;
    animation-delay: -3s;

    &::before {
      width: 12px;
      height: 12px;
      top: -6px;
      left: 6px;
    }

    &::after {
      width: 10px;
      height: 10px;
      top: -5px;
      left: 14px;
    }
  }

  // Stars container
  .stars {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.5s ease;
    z-index: 1;
  }

  .star {
    position: absolute;
    background: white;
    border-radius: 50%;
    opacity: 0;
    animation: starTwinkle 2s infinite;
    box-shadow: 0 0 3px rgba(255, 255, 255, 0.5);
  }
}

// Dark theme styles
html[data-theme='dark'] {
  .theme-toggle {
    background: linear-gradient(135deg, #0C1445 0%, #1A2980 100%);

    // Crescent moon
    &::before {
      transform: translateX(30px);
      background: linear-gradient(40deg, #FFFFFF 0%, #E6E6FA 100%);
      box-shadow: 
        4px -2px 0 0 #0C1445,  // Creates crescent shape
        0 0 10px rgba(255, 255, 255, 0.5);
    }

    .cloud-1, 
    .cloud-2 {
      opacity: 0.3;
      background: rgba(200, 200, 200, 0.3);
    }

    .stars {
      opacity: 1;
    }

    .cloud-1 {
      animation: cloudMove 20s linear infinite;
      animation-delay: -7s;
    }

    .cloud-2 {
      animation: cloudMove 15s linear infinite;
      animation-delay: -4s;
    }
  }
}

// Generate random star positions and sizes
@for $i from 1 through 20 {
  .theme-toggle .star:nth-child(#{$i}) {
    $size: random(3) + 1px;
    $top: random(100) + 0%;
    $left: random(100) + 0%;
    $delay: random(20) + 0s;

    width: $size;
    height: $size;
    top: $top;
    left: $left;
    animation-delay: -$delay;
  }
}

// Hover and focus states
.theme-toggle {
  &:focus {
    outline: 2px solid #4A90E2;
    outline-offset: 2px;
  }

  &:hover {
    opacity: 0.95;
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
  }

  &:active {
    transform: translateY(0);
  }
}